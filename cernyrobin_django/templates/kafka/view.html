<!DOCTYPE html>

<html lang="cs">
{% load static %}

<head>
    <link href="{% static 'universal2v7.css' %}" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/static/assets/kafka.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="{% static 'editor.js' %}"></script>
    <script src="/static/view.js"></script>
    <meta name="description" content="Stránka Unethical AI pro kafkovy videa">
    <script src="{% static 'regenerate.js' %}"></script>


    <title>Kafka AI</title>
</head>

<body>
    {% include "cernyrobin/invite.html" %}
    {%include "global/navbar.html"%}

    <!-- <script>
        document.documentElement.style.setProperty('--sourceColor', '{{color}}');
    </script> -->

    <div id="responsive-page-container">

        <div onclick="changeOpenStatusBulk(this.innerText == '⮟')" id="bulk-collapse-menu">
            ⮟⮝
        </div>

        <h1 id="video-name">{{title}}</h1>

        <iframe id="video-embed" src="https://www.youtube.com/embed/{{ video_id }}" title="{{ title}}" frameborder="0"
            allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen></iframe>
        <div id="answer-intro">

            <div id="answer-intro-heading">
                {%if is_custom%}
                <h2 class="view-subheading">Sourkomé regenerované Odpovědi</h2>
                {%else%}
                <h2 class="view-subheading">Veřejné Odpovědi</h2>
                {%endif%}
                <svg class="white-svg copy-icon"
                    onclick="navigator.clipboard.writeText(document.getElementById('answers-copy').textContent); copyText()"
                    xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision"
                    text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd"
                    clip-rule="evenodd" viewBox="0 0 399 512.02">
                    <path
                        d="M96.59 35.73h34.9C133.94 15.58 150.2 0 169.92 0c19.6 0 35.77 15.37 38.39 35.31l35.47.42c2.37 0 4.26 1.89 4.26 4.26V87c0 2.36-1.89 4.26-4.26 4.26H96.63c-2.31 0-4.26-1.9-4.26-4.26V39.99c-.04-2.37 1.86-4.26 4.22-4.26zm108.07 301.63c-5.44 0-9.86-4.42-9.86-9.87 0-5.44 4.42-9.86 9.86-9.86h124.93c5.45 0 9.86 4.42 9.86 9.86 0 5.45-4.41 9.87-9.86 9.87H204.66zm103.16-170.67h.88c3.12 0 5.9 1.44 7.7 3.7l80.02 87.86a9.845 9.845 0 0 1 2.56 6.62l.02 2.66v223.28c0 5.81-2.41 11.13-6.25 14.97s-9.15 6.24-14.96 6.24H156.47c-5.77 0-11.08-2.39-14.94-6.24l-.04-.04c-3.84-3.87-6.23-9.14-6.23-14.93V187.7c0-5.83 2.38-11.14 6.22-14.98s9.15-6.23 14.99-6.23h149.37c.68 0 1.34.07 1.98.2zm71.46 110.8c-43.74-1.7-65.42-3.27-77.68-16.13-12.27-12.88-11.51-32.56-10.03-70.26l.19-4.88H156.47c-.41 0-.78.17-1.05.44-.27.26-.44.64-.44 1.04v303.11c0 .41.16.78.41 1.03l.04.04c.26.26.63.42 1.04.42h221.32c.37 0 .74-.18 1.02-.46s.47-.65.47-1.03V277.49zm-68.25-80.91c-1.13 29.16-1.41 44.68 4.82 51.22 6.15 6.45 21.33 8.17 50.65 9.5l-55.47-60.72zM204.66 447.87c-5.44 0-9.86-4.41-9.86-9.86 0-5.44 4.42-9.86 9.86-9.86h124.93c5.45 0 9.86 4.42 9.86 9.86 0 5.45-4.41 9.86-9.86 9.86H204.66zm0-55.26c-5.44 0-9.86-4.41-9.86-9.86 0-5.44 4.42-9.86 9.86-9.86h124.93c5.45 0 9.86 4.42 9.86 9.86 0 5.45-4.41 9.86-9.86 9.86H204.66zm-104.29 7.49c6.93 0 12.55 5.62 12.55 12.55 0 6.92-5.62 12.55-12.55 12.55H39.33c-10.72 0-20.58-4.45-27.75-11.61C4.45 406.51 0 396.69 0 385.86V91.56C0 80.73 4.42 70.9 11.54 63.78l.84-.77c7.05-6.66 16.55-10.77 26.95-10.77h32.46v25.11H39.33c-3.68 0-7.05 1.4-9.57 3.69l-.47.49c-2.58 2.58-4.19 6.14-4.19 10.03v294.3c0 3.87 1.63 7.42 4.21 10.01v.05c2.58 2.58 6.14 4.18 10.02 4.18h61.04zM268.61 52.24h32.44c10.79 0 20.6 4.45 27.72 11.56 7.17 7.16 11.62 17.02 11.62 27.76v29.91c0 6.93-5.62 12.55-12.55 12.55-6.93 0-12.55-5.62-12.55-12.55V91.56c0-3.88-1.6-7.44-4.17-10.01-2.58-2.58-6.15-4.2-10.07-4.2h-32.44V52.24zm-99.13-33.96c11.15 0 20.18 9.03 20.18 20.18s-9.03 20.19-20.18 20.19-20.19-9.04-20.19-20.19c0-11.15 9.04-20.18 20.19-20.18z" />
                </svg>
            </div>


            <div id="copyPopup" class="copy-popup">Odpovědi zkopírovány!</div>

            {% if is_custom%}
            {%elif cernyrobin_user.email_verified%}
            <div id="answer-intro-splitter">

                <div class="answer-intro-side">
                    <p class="centered-text">Jako verifikovaný uživatel můžeš vygenerovat vlastní odpovědi, který jsou
                        unikátní a jenom pro tebe. Stačí jenom kliknout na tlačítko "Regenerovat odpovědi" a chvíli
                        počkat.</p>
                </div>
                <div class="answer-intro-side">
                    <h3 class="contrast-heading centered-text">Koukáš se na veřejné sdílené odpovědi</h3>
                    <button class="regen-button" id="regen-button">Regenerovat odpovědi</button>
                    <p id="loading-text" class="contrast-text">
                        Generují se nové odpovědi&nbsp;&nbsp;&nbsp;
                    </p>
                </div>
            </div>
            {%elif current_user.is_authenticated%}
            <div id="answer-intro-splitter">

                <div class="answer-intro-side">
                    <p class="centered-text">Pokud si svůj účet ověříš přidáním školního mail, budeš mít možnost si
                        vygenerovat odpovědi, které budou unikátní a viditené jenom pro tebe.</p>
                </div>
                <div class="answer-intro-side">
                    <h3 class="contrast-heading centered-text">Koukáš se na veřejné sdílené odpovědi</h3>
                    <a href="/verify_account" class="regen-button" style="cursor:not-allowed;">Regenerovat odpovědi</a>
                </div>
            </div>

            {%elif not current_user.is_authenticated%}


            <div id="answer-intro-splitter">

                <div class="answer-intro-side">
                    <p class="centered-text">Pokud si jednoduše založíš účet a verifikuješ si ho, budeš mít možnost si
                        vygenerovat odpovědi, které budou unikátní a viditené jenom pro tebe. </p>
                </div>
                <div class="answer-intro-side">
                    <h3 class="contrast-heading centered-text">Koukáš se na veřejné sdílené odpovědi</h3>
                    <a href="/register" class="regen-button" style="cursor:not-allowed;">Regenerovat odpovědi</a>
                </div>

                {%endif%}



                <p hidden id="answers-copy">{{answers_copy}}</p>

            </div>
            <div id="view-answers-container">
                {% for index, question, answer in qa_pairs_indexed %}
                <div class="pair-container">
                    <div class="pair-container-heading">


                        <p class="question-container">
                            Otázka {{question}}


                        </p>
                        <p id="" class="wrapping-button"
                            onclick='let answerTextElement=this.parentElement.parentElement.querySelector(".answer-text");console.log(answerTextElement),answerTextElement.style.maxHeight?answerTextElement.style.maxHeight=null:answerTextElement.style.maxHeight=answerTextElement.scrollHeight+"px";'>
                            <!-- Rozbalit  -->⮟⮝
                        </p>
                    </div>


                    <p class="answer-text" id="ans-{{index}}">
                        Odpověď {{answer}}

                    </p>


                </div>
                {%endfor%}


                {%if is_staff%}
                <img onclick="enterEditMode()" style="width: 50px; padding: 1px; margin: 1px;" id="edit-button"
                    src="/static/assets/Untitled.png" alt="">


                <textarea name="edited_answers" id="text-area" rows="12" cols="100" form="edit-form">
            {{answers}}
        </textarea>
                <textarea readonly form="edit-form" style="display: none;" name="video_id" id="text-area-id" cols="15"
                    rows="4">

            {{video_id}}
        </textarea>

                <form method="POST" action="" id="edit-form">
                    <input type="submit">
                    {%csrf_token%}

                </form>
                {%endif%}


            </div>
        </div>


        <!-- Komentáře start -->
        <h2 class="view-subheading">Komentáře</h2>
        <div id="comment-section-container">
            {%if is_custom%}
            <p>Komentáře jsou dostupné jenom na stránce s veřejnými odpověďmi</p>
            {%else%}

            <div class="comment-container" id="add-comment">
                <div class="pair-container-heading">
                    <p class="question-container">
                        Přidej Komentář
                    </p>
                    <p id="" class="wrapping-button"></p>
                </div>
                <p class="answer-text" id="ans-{{index}}">
                <form action="/kafka/comment/" method="POST" style="width: 100%;">

                    <input class="comment-field" type="text" name="comment">
                    <input hidden name="video_url" value="{{video_id}}">
                    {%csrf_token%}
                    <input class="round-button" type="submit" name="" id="" value="Přidat komentář">
                </form>

                </p>
            </div>


            {% for comment in comments %}

            <div class="comment-container">
                <div class="pair-container-heading">
                    <p class="question-container">
                        {{comment.user}}
                    </p>
                    <p id="" class="wrapping-button"></p>
                </div>
                <p class="answer-text">
                    {{comment.message}}
                </p>
            </div>

            {%endfor%}
            {%endif%}

            <!-- <div class="comment-container">
                    <div class="pair-container-heading">
                        <p class="question-container">
                            StuckInVim
                        </p>
                        <p id="" class="wrapping-button"></p>
                    </div>
                    <p class="answer-text" id="ans-{{index}}">
                        Ta dnešní mrdka mi sklouza do krku jak po másle
                    </p>
                </div>
 -->
        </div>
        <!-- Komentáře end -->




        <h2 class="view-subheading">Transkript videa</h2>
        <div class="transcript-container">
            <p class="transcript-text">{{transcript}}</p>
        </div>


    </div>
    {% include "disclaimer.html" %}
</body>

</html>